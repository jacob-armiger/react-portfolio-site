---
import Layout from '../layouts/Layout.astro';
import books from "../data/books.json"
import Card from "../components/Card.astro"

const readings = books.filter(book => book['Exclusive Shelf'] == "read").sort((a,b) => b['Date Read'].localeCompare(a['Date Read']))

const currentBook = books.filter(book => book['Exclusive Shelf'] == "currently-reading")[0]
const isbn = currentBook.ISBN13.replace(/\D/g,'');
---

<Layout title="Books">
	<main>
        <p class="text-2xl font-bold mb-4">Currently Reading</p>
        <div class="mb-8 mx-5 lg:mx-auto lg:h-72 flex border border-solid border-black rounded-md lg:w-1/2">
            <div class="grow content-center text-center">
                <p class="font-bold text-xl">{currentBook.Title}</p>
                <p class="italic pb-3">by {currentBook.Author}</p>
            </div>
            <img src=`https://covers.openlibrary.org/b/isbn/${isbn}-M.jpg` />
        </div>

        <p class="text-2xl font-bold mb-4">Recent Readings and Impressions</p>
        <div class="grid grid-cols-1 md:grid-cols-2 2xl:grid-cols-3">
            {readings.map((book: any, index: number) => {
                return(
                    <Card book={book}/>
                )
            })}
        </div>
	</main>
</Layout>