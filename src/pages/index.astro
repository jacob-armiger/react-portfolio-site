---
import { Image } from "astro:assets";
import { getCollection, type CollectionEntry } from "astro:content";
import books from "../assets/books.json";
import Layout from "../layouts/Layout.astro";

const latestArt = (await getCollection("art")).sort(
    (a: CollectionEntry<"art">, b: CollectionEntry<"art">) => {
        return Date.parse(String(b.data.date)) - Date.parse(String(a.data.date));
    },
)[0];

const currentBook = books.filter((book) => book["Exclusive Shelf"] == "currently-reading")[0];
---

<Layout title="Home">
    <main class="">
        <div
            class="h-[1400px] w-full bg-cover bg-top"
            style="background-image: url(/banner_image2.jpeg)">
            <div class="w-2/3 pl-4 pt-12 text-left text-white sm:pt-16">
                <p class="w-11/12 font-serif text-4xl sm:w-2/3 sm:text-5xl md:text-6xl 2xl:text-7xl">
                    Want a portrait made, art lessons, or to buy my work?
                </p>
                <button class="mt-2 rounded-sm bg-white px-4 py-2 font-bold text-black sm:mt-8"
                    >Contact Me</button
                >
            </div>
        </div>

        <div class="relative">
            <p class="absolute -left-48 bottom-28 -rotate-90 text-6xl">The Latest</p>
            <div class="flex flex-col flex-nowrap gap-8 sm:w-[70lvw] sm:flex-row sm:gap-8">
                <div
                    class="h-96 overflow-hidden object-cover text-right sm:h-[27rem] sm:w-64 dark:rounded-b-full">
                    <span class="font-extralight">Art Ã  la mode</span>
                    <Image
                        class="h-full w-full object-cover shadow-md dark:rounded-t-md"
                        src={latestArt.data.image}
                        alt="Most recent art"
                        width={300}
                    />
                </div>
                <p class="relative text-5xl font-bold sm:h-[27rem] sm:w-[30rem] md:text-7xl">
                    I'm currently reading
                    <span class="font-normal italic">{currentBook.Title}</span>
                    by
                    <span class="underline decoration-dotted">{currentBook.Author}</span>
                </p>
            </div>
        </div>
    </main>
</Layout>
